{% extends 'Mi_negocio/layout.html' %}

{% block body %}
<div class="row">
<div class="content">
    <h2 >{{ tienda.nombre }}</h2>
    <p>Dirección: {{ tienda.direccion }}</p>
    <p> Correo: <a href="mailto:{{ tienda.correo }}?subject=Consulta tienda {{ tienda.nombre }}" >{{ tienda.correo }}</a>
    </p>
    <p>Telefono:<a href="https://wa.me/{{tienda.telefono}}?text=Hola%20estoy%20interesado%20en%20información" class="button-whatsapp" target="_blank">{{ tienda.telefono }}</a> </p>
</div>
</div>
    {% if page_obj %}

    <h3>Artículos</h3>
    <div>

    <ul>
        <div class="row">
        {% for articulo in page_obj %}
        <div class="col-md-4 mb-4">
            <div >
                <div class="card-body">
                    <h5 class="card-title">{{ articulo.titulo }}</h5>
                    <p class="card-text">{{ articulo.descripcion|truncatechars:50 }}</p>
                    <p class="card-text">${{ articulo.precio }}</p>
                    <img src="{{ articulo.imagen.url }}" alt="{{ articulo.titulo }}" width="200">
                   </div>
                {% if articulo.tienda.propietario == user %}
                <!-- Botón para eliminar el artículo -->
                <div class="card-button ">
                <form action="{% url 'eliminar_articulo' articulo.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button class="btn btn-warning" type="submit" onclick="return confirm('¿Estás seguro de que deseas eliminar este artículo?');">Eliminar</button>
                </form>
            </div>
            {% endif %}
            </div>
        </div>
            
            
        {% endfor %}
    </div>
    </ul>
</div>
    {% if request.user == tienda.propietario %}
        <a href="{% url 'agregar_articulo' tienda_id=tienda.id %}">
            <button class="btn btn-primary">Agregar artículo</button>
        </a>
    {% endif %}


    <!-- Paginación -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1" aria-label="Primera">
                        <span aria-hidden="true">&laquo; Primera</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Anterior">
                        <span aria-hidden="true">Anterior</span>
                    </a>
                </li>
            {% endif %}

            <li class="page-item disabled">
                <span class="page-link">
                    Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
                </span>
            </li>

            {% if page_obj.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Siguiente">
                        <span aria-hidden="true">Siguiente</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Última">
                        <span aria-hidden="true">Última &raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
    {% else %}
    <p>No hay productos disponibles en esta tienda.</p>
{% endif %}

{% endblock %}